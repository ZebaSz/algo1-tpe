\begin{problema}{crearS}{c: Campo, ds: [Drone]}{Sistema}
\asegura[dronesEnGranero] {(\forall d \leftarrow ds) posicionActual(d) == posicionGranero(c)}
\asegura[bateriaLlena] {(\forall d \leftarrow ds) bateria(d) == 100}
\asegura[cultivosNoSensados] {(\forall i \leftarrow [0...prm (dimensiones(c))), j \leftarrow [0...sgd(dimensiones(c)))) \\ contenido (c,i,j) == Cultivo \Rightarrow estadoDelCultivo(c,i,j) == NoSensado}
\asegura {(campo (\res) == c}
\asegura {mismos (enjambreDrones (\res), ds)}
\end{problema}

\begin{problema}{campoS}{s: Sistema}{Campo}
\asegura {res == campo(s)}
\end{problema}

\begin{problema}{estadoDelCultivoS}{s: Sistema, i, j: \ent}{EstadoCultivo}
\requiere {enRango(dimensiones(campo(s)),i,j)}
\requiere {contenido(campo(s),i,j) == Cultivo}
\asegura {res == estadoDelCultivo(s,i,j)}
\end{problema}

\begin{problema}{enjambreDronesS}{s: Sistema}{[Drone]}
\asegura {mismos(res, enjambreDrones(s))}
\end{problema}

\begin{problema}{crecerS}{s: Sistema}{}
\modifica {s}
\asegura[mismoCampo]{campo(\pre{s}) == campo(s)}
\asegura[mismosDrones]{enjambreDrones(\pre{s}) == enjambreDrones(s)}
\asegura[mismoContenido]{(\forall i \leftarrow [0..\prm{dimensiones(campo(s))}) (\forall j \leftarrow [0..\sgd{dimensiones(campo(s))}) \\ contenido(campo(s), i, j) == contenido(campo(pre(s)), i, j)}
\asegura[crecimientoCultivo]{(\forall i \leftarrow [0..\prm{dimensiones(campo(s))}) (\forall j \leftarrow [0..\sgd{dimensiones(campo(s))}) \\ contenido(campo(s), i, j) == Cultivo \Rightarrow \\ (estadoDelCultivo(\pre{s}, i, j) == RecienSembrado \Rightarrow estadoDelCultivo(s, i, j) == EnCrecimiento \\ \wedge estadoDelCultivo(\pre{s}, i, j) == EnCrecimiento \Rightarrow estadoDelCultivo(s, i, j) == ListoParaCosechar \\ \wedge (estadoDelCultivo(\pre{s}, i, j) \neq RecienSembrado \wedge estadoDelCultivo(\pre{s}, i, j) \neq EnCrecimiento) \\ \Rightarrow estadoDelCultivo(\pre{s}, i, j)  = estadoDelCultivo(s, i, j))}
\end{problema}

\begin{problema}{seVinoLaMalezaS}{s: Sistema, ps: [(\ent, \ent)]}{}
\requiere {(\forall (i,j) \leftarrow ps) enRango(dimensiones(campo(s)),i,j)}
\requiere {(\forall (i,j) \leftarrow ps) contenido(campo(s),i,j) == Cultivo}
\modifica{s}
\asegura[mismoCampo]{campo(\pre{s}) == campo(s)}
\asegura[mismosDrones]{enjambreDrones(\pre{s}) == enjambreDrones(s)}
\asegura[enmalezado]{(\forall i \leftarrow [0..\prm{dimensiones(campo(s))}) (\forall j \leftarrow [0..\sgd{dimensiones(campo(s))})) \\ \en{(i,j),ps} \Rightarrow estadoDelCultivo(s,i,j) == ConMaleza \\ \wedge \neg(\en{(i,j),ps)} \Rightarrow estadoDelCultivo(s,i,j) == estadoDelCultivo(pre(s),i,j)}
\end{problema}

\begin{problema}{seExpandePlagaS}{s: Sistema}{}
\modifica {s}
\asegura[mismoCampo]{campo(\pre{s}) == campo(s)}
\asegura[mismosDrones]{enjambreDrones(\pre{s}) == enjambreDrones(s)}
\asegura[expansiónDePlaga]{(\forall i \leftarrow [0..\prm{dimensiones(campo(s))}) (\forall j \leftarrow [0..\sgd{dimensiones(campo(s))})) \\ adyacenteAPlaga(s,i,j) \Rightarrow estadoDelCultivo(s,i,j) == ConPlaga \\ \wedge  \neg(adyacenteAPlaga(s,i,j)) \Rightarrow estadoDelCultivo(s,i,j) == estadoDelCultivo(pre(s),i,j)}
\end{problema}

\begin{problema}{despegarS}{s: Sistema, d: Drone}{}
\requiere {\neg enVuelo(d)}
\requiere {bateria(d) = 100}
\modifica{s}
\asegura {|vueloRealizado(d)| > 0}
\end{problema}

\begin{problema}{listoParaCosecharS}{s: Sistema}{\bool}
\asegura {|dameEstado(s, ListoParaCosechar)|\: /\: |dameOtroEstado(s, [])| \geq 0.9}
\end{problema}

\begin{problema}{aterrizarYCargarBateriaS}{s: Sistema, b: \ent}{}
%\requiere {b < 100} %Podria haber un d con bateria=100 y |vuelosRealizados|>0?
\modifica {s}
%\asegura{sinRepetidos(dronesConBateria(enjambreDrones(pre(s)),b) ++ dronesConBateria(enjambreDrones(s),b)}
\asegura {(\forall d \leftarrow (dronesConBateria(enjambreDrones(pre(s)),b)) \\
bateria(d)== 100 \wedge |vuelosRealizados(d)|== 0 \wedge \neg enVuelo(d)}
 
\end{problema}




\begin{problema}{fertilizarPorFilas}{s: Sistema}{}
\requiere {sinRepetidos(listaAbscisas(posicionesEnjambre(s)))}
\modifica {s}
\asegura {(\forall d \leftarrow dejanDeFuncionar(pre(s)))(\forall e \leftarrow enjambreDrones(s)) \\
id(s)==id(e), posicionActual(e) == posicionGranero(campo(s))}
\asegura {(\forall e \leftarrow enjambreDrones(s)) (\forall d \leftarrow enjambreDrones(pre(s))) \\
(coordAbscisa(e) < coordAbscisa(d) \vee posicionActual(e) == posicionGranero(campo(s)))\\
\wedge (mismos (productosDisponibles(e), Fertilizante:productosDisponibles(d)))}
\end{problema}


\begin{problema}{volarYSensarS}{s: Sistema, d: Drone}{}
%\modifica{s}
%\asegura {(\forall e \leftarrow enjambreDrones(s), id(e)==id(d)) \\
%distancia(posicionActual(d),posicionActual(e)) == 1}

%Modifica el sistema s haciendo que el drone d se mueva a una parcela adyacente de donde estaba. Si el drone se mueve a una P arcela de Cultivo cuyo estado es N oSensado sensa esa parcela. En caso contrario, de acuerdo a los productos de los que disponga realiza alguna de las siguientes acciones: Si tiene algún tipo de herbicida, y la parcela a la cual el drone llega es de Cultivo y está ConM aleza, aplica el herbicida y planta semillas, dejando el cultivo en estado RecienSembrado. Si tiene algún tipo de plaguicida, y la parcela a la cual el drone llega es de Cultivo y está ConP laga, el drone aplica el plaguicida y planta semillas, dejando el cultivo en estado RecienSembrado. En todos los casos, es necesario que el drone cuente con suficiente baterı́a como para utilizar los productos. En cualquier caso, luego de utilizar un producto, éste se elimina del listado de productos disponibles en el drone.
\end{problema}
